# 更新日志

本文档记录了维修项目管理系统的所有重要更新。

## 2025年5月21日更新

### 批量导入功能添加

- 为管理员页面添加了批量导入功能，包括工单管理、材料管理、工作内容和用户管理
- 创建了通用的ImportModal组件，支持CSV文件上传
- 添加了后端批量导入API，支持数据验证和错误处理
- 提供了CSV模板文件，方便用户准备导入数据
- 添加了静态文件服务，支持模板文件下载

### 数据库结构修复

- 修复了tasks表缺少字段的问题，添加了attachment、work_list等字段
- 修复了work_items表的created_at字段为空的问题
- 创建了数据库结构检查和修复工具
- 优化了数据库查询，添加了适当的过滤条件

### 前端组件优化

- 添加了批量操作下拉菜单，提供批量导入和模板下载功能
- 优化了表单验证和错误处理
- 添加了详细的导入说明文档，指导用户正确准备数据

### 文档更新

- 拆分了README.md文件，创建了专门的文档文件
- 添加了批量导入功能的使用说明
- 更新了API文档，添加了新的批量导入API端点
- 添加了数据库结构检查和修复工具的使用说明

## 2025年5月20日更新

### 项目文档更新

- 重新梳理了项目结构，提供更详细的目录和文件说明
- 增加了代码架构说明，包括后端分层架构和前端组件化架构
- 添加了API端点文档，详细列出系统提供的所有API接口
- 扩展了数据库关系说明，增加了关系表和字段的详细信息
- 添加了响应式设计说明，解释了移动端、PC端和管理端的实现方式

## 2025年5月19日更新

### 数据库关系更新

- 明确了系统中的主要实体关系
- 维修项目与工单：一对多关系
- 施工人员与施工队伍：多对一关系
- 维修项目与施工队伍：多对多关系
- 工单与施工人员：多对多关系
- 工单与材料：多对多关系
- 工单与工作内容：多对多关系
- 添加了数据库关系文档

## 2025年5月18日更新

### 前端端口配置

- 前端服务端口已从默认的5173修改为8458
- 修改了Vite配置文件，添加了自定义端口设置
- 更新了启动脚本中的端口显示信息

### CORS配置更新

- 后端CORS配置已更新，添加了对新前端端口(8458)的支持
- 解决了跨域请求问题，确保前后端通信正常

### 管理功能增强

- 添加了材料管理页面，支持材料的增删改查
- 添加了工作内容管理页面，可配置不同类型的工作内容
- 添加了施工队伍管理页面，支持团队和成员管理
- 添加了统计分析页面，提供多维度数据可视化

### 兼容性说明

- 系统现在使用React 19，而Ant Design v5官方支持React 16-18
- 虽然会显示兼容性警告，但功能正常运行
- 如需消除警告，可考虑降级React版本至18

## 2025年5月15日更新

### 初始版本发布

- 完成基本功能开发
- 实现用户认证和授权
- 实现工单管理基本功能
- 实现材料管理基本功能
- 实现项目管理基本功能
- 实现响应式设计，支持PC端和移动端

## 版本规划

### 即将发布的功能

1. **离线模式支持**
   - 实现数据本地缓存
   - 支持离线创建和编辑工单
   - 网络恢复后自动同步数据

2. **高级统计分析**
   - 添加更多统计图表
   - 支持自定义报表
   - 添加数据导出功能

3. **移动端增强**
   - 添加地理位置功能
   - 支持拍照上传
   - 优化移动端用户体验

4. **工作流定制**
   - 支持自定义工作流
   - 添加审批流程
   - 支持工单模板

5. **多语言支持**
   - 添加英文界面
   - 支持语言切换
   - 本地化日期和数字格式
